(this.webpackJsonpsponsibly=this.webpackJsonpsponsibly||[]).push([[1],{14:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={dashboard:"/dashboard",logging:{edit:"/logging/edit/:id",editLink:function(e){return"/logging/edit/".concat(e)},new:"/logging/new",list:"/logging/list"},recipes:{edit:"/recipes/edit/:id",new:"/recipes/new",list:"/recipes/list"}}},140:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(4),r=n(21);o.css.global("*",{padding:"0",margin:"0"}),o.css.global("html, body, #root, ul",{width:"100%",height:"100%"}),o.css.global("ul",{listStyle:"none"}),o.css.global("html",{fontSize:"18",fontWeight:"300",fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen,\n  Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif"}),o.css.global("a",{color:"inherit",textDecoration:"none"}),o.css.global("button:focus",{outline:"none !important"}),o.css.global(".MuiInput-underline:after, .MuiInput-underline:before",{borderBottomColor:"".concat(r.green100," !important")}),o.css.global(".MuiInput-underline:hover:not(.Mui-disabled):before",{borderBottomColor:"".concat(r.green500," !important")});var i={textField:{underlineStyle:{borderColor:r.green100},underlineFocusStyle:{borderColor:r.green500}}}},145:function(e,t,n){e.exports=n(268)},268:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),i=n(86),a=n.n(i),c=n(126),s=n.n(c),l=(n(140),n(77)),u=n(4),d=n(43),f=n(22),g=n(14),h=(n(91),n(127)),b=n(50),m=n(125),p=n(80),v=n(23),y=(n(254),{apiKey:"AIzaSyBujR137-fNfbRwEwhT51qjsRZ2pQvn0d0",authDomain:"sponsibly-79cb7.firebaseapp.com",databaseURL:"https://sponsibly-79cb7.firebaseio.com",projectId:"sponsibly-79cb7",storageBucket:"sponsibly-79cb7.appspot.com",messagingSenderId:"100632956671",appId:"1:100632956671:web:291254e635f9a7343c46ca",measurementId:"G-KSD3DREJQN"}),w=n(78),j=function e(t,n,o){var r=this;Object(p.a)(this,e),this._observers=[],this.data=[],this.registerObserver=function(e){r._observers.push(e)},this.getRecord=function(e){return r._entriesRef.doc(e).get().then((function(e){return e.data()}))},this.deleteRecord=function(e){return r._entriesRef.doc(e).delete()},this.saveRecord=function(e){var t=e.id,n=Object(m.a)(e,["id"]),o=Object(b.a)({},n,{$category:r._category,user:r._uid});return t?r._entriesRef.doc(t).set(o):r._entriesRef.add(o)},this.sortLogs=function(){r.data.sort((function(e,t){return Object(w.a)(t)-Object(w.a)(e)}))},this.onSnapshot=function(e){e.docChanges().forEach((function(e){if("added"===e.type)r.data.unshift(Object(b.a)({},e.doc.data(),{id:e.doc.id}));else if("modified"===e.type){var t=r.data.find((function(t){return t.id===e.doc.id})),n=r.data.indexOf(t);r.data[n]=Object(b.a)({},e.doc.data(),{id:e.doc.id})}else"removed"===e.type&&(r.data=r.data.filter((function(t){return t.id!==e.doc.id})))})),r.sortLogs(),r._observers.forEach((function(e){return e(r.data)}))},this._uid=t,this._entriesRef=o,this._category=n,this.saveRecord=this.saveRecord.bind(this),this.deleteRecord=this.deleteRecord.bind(this),this.getRecord=this.getRecord.bind(this),this._entriesRef.where("$category","==",n).where("user","==",t).orderBy("date","desc").limit(40).onSnapshot(this.onSnapshot)},E=function(){function e(){var t=this;Object(p.a)(this,e),this._auth=null,this._entriesRef=null,this.login=function(e){var n;switch(e){case"google":n=new v.auth.GoogleAuthProvider;break;default:throw Error("Unexpected login type: ".concat(e))}t.auth.signInWithRedirect(n)},this.signOut=function(){return v.auth().signOut()},v.apps.length||(console.log(y),v.initializeApp(y))}return Object(h.a)(e,[{key:"checkAuth",value:function(){var e=this;return new Promise((function(t,n){e.auth.setPersistence(v.auth.Auth.Persistence.SESSION),e.auth.onAuthStateChanged((function(o){if(o){var r=v.firestore();e._entriesRef=r.collection("entries"),e.user=o;var i=o.uid;e.loggingStore=new j(i,"logs",e._entriesRef),t(e)}else n()}))}))}},{key:"auth",get:function(){return this._auth?this._auth:v.auth()}}]),e}(),O=n(75),S=n(130),R=n.n(S);function x(e){var t=e.photoURL,n=e.signOut;return r.a.createElement("nav",Object(u.css)({position:"fixed",top:"0",width:"100%",height:"3.5rem",zIndex:"99",backgroundColor:"#6cb16a",display:"flex",justifyContent:"space-between",alignItems:"center",color:"#fff"}),r.a.createElement("img",Object.assign({src:t,alt:"avatar"},Object(u.css)({width:"2rem",position:"relative",left:"0.5rem",borderRadius:"100%",border:"0.1rem solid #fff",boxShadow:"0 0.3rem 1rem #00541e"}))),r.a.createElement("span",Object(u.css)({fontWeight:"500"}),"Sponsibly"),r.a.createElement("div",Object.assign({onClick:n},Object(u.css)({position:"relative",right:"0.5rem",color:"#fff"})),r.a.createElement(R.a,{color:"#fff"})))}var k=n(131),I=n.n(k),_=n(132),C=n.n(_),z=n(135),A=n.n(z);function D(e){e.children;var t=e.Icon,n=e.label,r=e.path;return o.createElement(d.c,Object.assign({to:r,isActive:function(e,t){var o=t.pathname.split("/")[1]===n.toLowerCase();return e||o},replace:!0,activeClassName:"navlink-active"},Object(u.css)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#9e9e9e",cursor:"pointer","&.navlink-active":{color:"#6cb16a","& svg":{fill:"#6cb16a !important"}}})),o.createElement(t,null),o.createElement("span",null,n))}function F(){return r.a.createElement("footer",Object(u.css)({display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",position:"fixed",bottom:"0",width:"100%",height:"3.5rem",borderTop:"1px solid #eaeaea"}),r.a.createElement(D,{path:g.a.dashboard,Icon:I.a,label:"Dashboard"}),r.a.createElement(D,{path:g.a.logging.list,Icon:C.a,label:"Logging"}),r.a.createElement(D,{path:g.a.recipes.list,Icon:A.a,label:"Settings"}))}var L=Object(o.lazy)((function(){return n.e(8).then(n.bind(null,402))})),B=Object(o.lazy)((function(){return n.e(7).then(n.bind(null,403))})),N=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(10)]).then(n.bind(null,407))})),W=Object(o.lazy)((function(){return n.e(6).then(n.bind(null,404))})),M=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(9)]).then(n.bind(null,408))})),J=new E;var P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(r.a.createElement(o.Suspense,{fallback:null},r.a.createElement(s.a,null,r.a.createElement((function(){var e=Object(o.useState)(null),t=Object(l.a)(e,2),n=t[0],i=t[1],a=Object(o.useState)(null),c=Object(l.a)(a,2),s=c[0],h=c[1];return Object(o.useEffect)((function(){J.checkAuth().then((function(e){e.loggingStore.registerObserver((function(e){return i({logs:e})})),h(!0)})).catch((function(e){h(!1)}))}),[J]),null===s?r.a.createElement(O.a,null):!1===s?r.a.createElement(L,{login:J.login}):r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(x,Object.assign({},J.user,{signOut:function(){J.signOut().then((function(){h(!1)}))}})),r.a.createElement(o.Suspense,{fallback:r.a.createElement(O.a,null)},r.a.createElement("div",Object(u.css)({position:"fixed",bottom:"3.5rem",top:"3.5rem",width:"100%",overflow:"scroll"}),r.a.createElement(f.b,{exact:!0,path:"/",render:function(){return r.a.createElement(f.a,{to:g.a.logging.list})}}),r.a.createElement(f.b,{path:g.a.dashboard,exact:!0,render:function(){return r.a.createElement(W,null)}}),r.a.createElement(f.b,{path:g.a.logging.new,exact:!0,render:function(e){var t=e.history;return r.a.createElement(N,{history:t,saveFn:J.loggingStore.saveRecord})}}),r.a.createElement(f.b,{path:g.a.logging.list,exact:!0,render:function(){return r.a.createElement(M,{logs:n?n.logs:null,deleteFn:J.loggingStore.deleteRecord})}}),r.a.createElement(f.b,{path:g.a.logging.edit,exact:!0,render:function(e){var t=e.history,n=e.match;return r.a.createElement(N,{history:t,saveFn:J.loggingStore.saveRecord,deleteFn:J.loggingStore.deleteRecord,getRecord:J.loggingStore.getRecord,id:n.params.id})}}),r.a.createElement(f.b,{exact:!0,path:g.a.recipes.list,render:function(){return r.a.createElement(B,null)}}))),r.a.createElement(F,null)))}),null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/sponsibly",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/sponsibly","/service-worker.js");P?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):T(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):T(e)})),window.addEventListener("fetch",(function(){}))}}()},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(1),r=n.n(o),i=n(4),a=n(129),c=n.n(a);function s(e){var t=e.small,n=void 0!==t&&t;return r.a.createElement("div",Object(i.css)({position:"fixed",left:"50%",top:"45%",transform:"translate(-50%, -50%)",zIndex:999}),r.a.createElement(c.a,{size:n?35:60,thickness:n?5:7,color:"#9ccc65"}))}},78:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c}));var o=n(25);function r(e){return new Date("".concat(e.date,"T").concat(e.time)).getTime()}function i(e){var t=e.split(":")[0];return t<10?Object(o.emojify)(":bread:"):t<15?Object(o.emojify)(":bento:"):Object(o.emojify)(":sushi:")}function a(e){return"good"===e?Object(o.emojify)(":smile:"):"fair"===e?Object(o.emojify)(":simple_smile:"):Object(o.emojify)(":worried:")}function c(e){var t=e.split("-");return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t[1]-1],". ").concat(t[2])}},91:function(e,t){}},[[145,2,3]]]);
//# sourceMappingURL=main.20fa3f5a.chunk.js.map